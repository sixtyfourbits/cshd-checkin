(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{6372:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var n=s(5155),l=s(2115);function r(e){let{seat:t,onClose:s}=e,l=async()=>{if(!confirm("좌석 ".concat(t.id,"번을 강제 퇴실 처리하시겠습니까?")))return;let e=await fetch("/api/check-out",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({seat_id:t.id})});if(e.ok)alert("강제 퇴실 처리되었습니다."),s();else{let{error:t}=await e.json();alert("오류: ".concat(t))}};return(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",onClick:s,children:(0,n.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-sm",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("h2",{className:"text-2xl font-bold mb-4",children:["좌석 ",t.id," 정보"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"이름:"})," ",t.name]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"학년:"})," ",t.grade]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"반:"})," ",t.class_number]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"번호:"})," ",t.student_number]}),(0,n.jsxs)("div",{className:"mt-6 space-y-2",children:[(0,n.jsx)("button",{onClick:l,className:"w-full bg-red-500 text-white py-2 rounded-lg hover:bg-red-600",children:"강제 퇴실"}),(0,n.jsx)("button",{onClick:s,className:"w-full bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600",children:"닫기"})]})]})})}function i(e){let{seats:t}=e,[s,i]=(0,l.useState)(null);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"grid grid-cols-10 gap-4",children:t.map(e=>{let t="p-4 border rounded-lg text-center font-bold ".concat(e.is_occupied?"bg-green-500 text-white cursor-pointer":"bg-gray-300 text-gray-600 cursor-not-allowed");return(0,n.jsx)("button",{onClick:()=>e.is_occupied&&i(e),className:t,children:e.id},e.id)})}),s&&(0,n.jsx)(r,{seat:s,onClose:()=>i(null)})]})}function a(){let[e,t]=(0,l.useState)([]);return(0,l.useEffect)(()=>{let e=async()=>{let e=await fetch("/api/admin/seats");e.ok&&t(await e.json())};e();let s=setInterval(e,5e3);return()=>clearInterval(s)},[]),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"청송학당 실시간 좌석 현황"}),(0,n.jsx)(i,{seats:e})]})}},9407:(e,t,s)=>{Promise.resolve().then(s.bind(s,6372))}},e=>{e.O(0,[441,964,358],()=>e(e.s=9407)),_N_E=e.O()}]);